<!DOCTYPE html>
{% load staticfiles %}
<html lang="en">
<head>
<title> {% block title %}  Home {% endblock title %} </title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Industial Visit project">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="{% static "styles/bootstrap4/bootstrap.min.css"%}">
<link href="{% static "plugins/font-awesome-4.7.0/css/font-awesome.min.css"%}" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="{% static "plugins/OwlCarousel2-2.2.1/owl.carousel.css"%}">
<link rel="stylesheet" type="text/css" href="{% static "plugins/OwlCarousel2-2.2.1/owl.theme.default.css"%}">
<link rel="stylesheet" type="text/css" href="{% static "plugins/OwlCarousel2-2.2.1/animate.css"%}">
<link rel="stylesheet" type="text/css" href="{% static "styles/main_styles.css"%}">
<link rel="stylesheet" type="text/css" href="{% static "styles/responsive.css"%}">
<link rel="stylesheet" type="text/css" href="{% static "styles/base.css"%}">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
<link rel="stylesheet" type="text/css" href="{% static "styles/start.css" %}">

<style media="screen">
	@import url('https://fonts.googleapis.com/css?family=Tajawal');
	@import url('https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css');

	#subscribeModal .modal-content{
	overflow:hidden;
	}
	a.h2{
		color:#007b5e;
		margin-bottom:0;
		text-decoration:none;
	}
	#subscribeModal .form-control {
		height: 56px;
		border-top-left-radius: 30px;
		border-bottom-left-radius: 30px;
	padding-left:30px;
	}
	#subscribeModal .btn {
		border-top-right-radius: 30px;
		border-bottom-right-radius: 30px;
	padding-right:20px;
	background:#007b5e;
	border-color:#007b5e;
	}
	#subscribeModal .form-control:focus {
		color: #495057;
		background-color: #fff;
		border-color: #007b5e;
		outline: 0;
		box-shadow: none;
	}
	#subscribeModal .top-strip{
	height: 155px;
		background: #007b5e;
		transform: rotate(141deg);
		margin-top: -94px;
		margin-right: 190px;
		margin-left: -130px;
		border-bottom: 65px solid #4CAF50;
		border-top: 10px solid #4caf50;
	}
	#subscribeModal .bottom-strip{
	height: 155px;
		background: #007b5e;
		transform: rotate(112deg);
		margin-top: -110px;
		margin-right: -215px;
		margin-left: 300px;
		border-bottom: 65px solid #4CAF50;
		border-top: 10px solid #4caf50;
	}

	/**************************/
	/****** modal-lg stips *********/
	/**************************/
	#subscribeModal .modal-lg .top-strip {
		height: 155px;
		background: #007b5e;
		transform: rotate(141deg);
		margin-top: -106px;
		margin-right: 457px;
		margin-left: -130px;
		border-bottom: 65px solid #4CAF50;
		border-top: 10px solid #4caf50;
	}
	#subscribeModal .modal-lg .bottom-strip {
		height: 155px;
		background: #007b5e;
		transform: rotate(135deg);
		margin-top: -115px;
		margin-right: -339px;
		margin-left: 421px;
		border-bottom: 65px solid #4CAF50;
		border-top: 10px solid #4caf50;
	}

	/****** extra *******/
	#Reloadpage{
		cursor:pointer;
	}

	</style>
</head>

<body>
	{% if messages %}
	{% for message in messages%}
	
	<div class="modal fade text-center py-5"  id="subscribeModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-md" role="document">
			<div class="modal-content">
				<div class="modal-body">
					<div class="top-strip"></div>
					<a class="h2" href="http://127.0.0.1:8000/" target="_blank">Visit+</a>
						<p class="pb-1 text-muted">{{message}}</p><br>
						<a href="http://127.0.0.1:8000/">Home</a>
					<div class="bottom-strip"></div>
				</div>
			</div>
		</div>
	</div>
	
	{% endfor %}
	{% endif %}
<div class="container-fluid">
	<button onclick="topFunction()" id="myBtn2" title="Go to top"><i class="fa fa-arrow-up" aria-hidden="true"></i></button>


	<!-- Home -->

	<div class="home">
		<!-- Header -->

		<header class="header" id="header">
			<div>
				<div class="header_top">
					<div class="container" >
						<div class="row">
							<div class="col">
								<div class="header_top_content d-flex flex-row align-items-center justify-content-start">
									<div class="logo">
										<a href="#">Visit<span style="color:#3385ff;">+</span></a>
									</div>
									<div class="header_top_extra d-flex flex-row align-items-center justify-content-start ml-auto">
										<div class="header_top_nav">

											<ul class="d-flex flex-row align-items-center justify-content-start">



											</ul>
										</div>
									</div>
									<div class="hamburger ml-auto"><i class="fa fa-bars" aria-hidden="true"></i></div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="header_nav" id="header_nav_pin">
					<div class="header_nav_inner">
						<div class="header_nav_container" style="background-color:#3385ff;">
							<div class="container">
								<div class="row">
									<div class="col">
										<div class="header_nav_content d-flex flex-row align-items-center justify-content-start">
											<nav class="main_nav">
												<ul class="d-flex flex-row align-items-center justify-content-start">
													{% block active %}<li class="active"><a  class="cool-link" href="{% url 'searchBarApp:searching' %}">  Home </a></li> {% endblock active %}
													{%block contact_active%}<li ><a class="cool-link" href="{% url 'searchBarApp:contact' %}">Contact</a></li>{%endblock contact_active%}
																								<li><a class="cool-link"href="{% url 'blog:blog-home' %}">Blog</a></li>
																							 <li><a class="cool-link"href="{% url 'chat:index' %}">Chat</a></li>
													{% if user.is_authenticated %}
														<li><a class="cool-link" href="{% url 'user_logout' %}">Logout</a></li>
														<li><a href="{% url 'basicapp:profile' %}">{{ user.username }}</a></li>
													{% else %}
														{%block login_active%}<li><a class="cool-link" href="{% url 'basicapp:user_login' %}">Login</a></li>{%endblock login_active%}
														{%block sign_active%}<li><a class="cool-link" href="{% url 'basicapp:register' %}">SignUp</a></li>{%endblock sign_active%}
													{% endif %}
												</ul>

											</nav>
											<div class="search_content d-flex flex-row align-items-center justify-content-end ml-auto">
												<form  id="search_container_form" class="search_container_form" action="{% url 'searchBarApp:result' %}" method="POST">
													{% csrf_token %}
													<select class="category" name="select_type" id="select_type" style="width: 110px; height: 45px">
											<option value="Select" selected>Select one</option>
												<option value="All">All</option>
												<option value="Automobiles" >Automobiles</option>
												<option value="Assembling">Assembling</option>
												<option value="IT Companies">IT Companies</option>
												<option value="Manufacturing">Manufacturing</option>

												</select>

													<input  class="text" class="search_container_input" name="query" id="query" autocomplete="off" placeholder="Search for ..." size="1">
													<button  id="myBtn" type="submit" class="btn btn-success">Search</button>
												</form>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div id="progress-bar"></div>

		</header>
												{% block body_block %}

												{%endblock body_block  %}
												{% block search %}
												{% endblock search %}
	<!-- Footer -->

	<footer class="footer" >
		<div class="parallax_background parallax-window" data-parallax="scroll" data-image-src="{% static "images/Footer.jpg"%}" data-speed="1"></div>
		<div class="footer_content">
			<div class="container">
				<div class="row">

					<!-- Footer About -->
					<div class="col-lg-3 footer_col">
						<div class="footer_about">
							<div class="logo">
								<a href="#">Visit<span style="color:#3385ff;">+</span></a>
							</div>
							<div class="footer_about_text">Visit+ is web service started by group of students to make things easier for practical knowledge seekers .</div>

						</div>
					</div>

					<!-- Footer Contact -->
					<div class="col-lg-5 footer_col" style="padding-left:200px">
						<div class="footer_contact">
							<!-- <div class="footer_contact_title">Subscribe to Our Newsletter</div> -->
							<!-- <button type="button" class="btn btn-success btn-lg" style="background-color:#3385ff;" onclick="location.href='{% url 'newsletters:newsletter_signup' %}'" >Subscribe to Newsletter</button> -->
							<div class="container">
								<div class="row">
									<div class="col-lg-7 col-lg-offset-3">
										
										{% if messages %}
											{% for message in messages%}
												<div {% if message.tags %}class="{{message.tags}}" {% endif %} role="alert">
														<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
															{{message}}
															
														<a href="http://127.0.0.1:8000/">Go back</a>
												</div>
											{% endfor %}
										{% else %}
											<form  method="POST">
												{%csrf_token%}
												<h4  style="color:green">Subscribe to Visit+ Newsletter</h4>
												<div class="input-group" >

												<center> {{form_newslet.email}} </center>
												<span class="input-group-btn">
													<button class="btn btn-primary" type="submit">Subscribe <i class="fa fa-arrow-right"></i></button>
												</span>
												</div>
											</form>


										{% endif %}
									</div>
								</div>
							</div>
						</div>
					</div>


				</div>
			</div>
		</div>

		<div class="footer_bar">
			<div class="container">
				<div class="row">
					<div class="col">
						<div class="footer_bar_content d-flex flex-sm-row flex-column align-items-lg-center align-items-start justify-content-start">
							<nav class="footer_nav">
								<ul class="d-flex flex-lg-row flex-column align-items-lg-center align-items-start justify-content-start">
									<li class="active"><a class="cool-link" href="{% url 'searchBarApp:searching' %}">Home</a></li>
									<li ><a class="cool-link" href="{% url 'searchBarApp:about' %}">About</a></li>
									<li><a class="cool-link" href="{% url 'searchBarApp:services' %}">Services</a></li>
									<li><a class="cool-link" href="{% url 'searchBarApp:blog' %}">blog</a></li>
								</ul>
							</nav>
							<div class="footer_links" style="padding-left:450px">
								<ul class="d-flex flex-lg-row flex-column align-items-lg-center align-items-start justify-content-start">
									<li><a  href="{% url 'searchBarApp:contact' %}">Contact Us</a></li>
									<li><a href="https://in.pinterest.com/"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li>
									<li><a href="https://www.facebook.com/Visit-1488925607877844/?modal=admin_todo_tour"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
									<li><a href="https://twitter.com/Visit97965602"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
										<li><a href="https://instagram.com/"><i class="fa fa-instagram" aria-hidden="true"></i></a></li>
									<li><a href="https://linkedin.com/"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li>

								</ul>
								</div>
							</div>
							</div>

					</div>
				</div>
			</div>
		</div>
	</footer>


</div>



<script src="{% static "js/jquery-3.3.1.min.js" %}"></script>
<script src="{% static  "styles/bootstrap4/popper.js" %}"></script>
<script src="{% static  "styles/bootstrap4/bootstrap.min.js" %}"></script>
<script src="{%  static "plugins/OwlCarousel2-2.2.1/owl.carousel.js" %}"></script>
<script src="{% static "plugins/easing/easing.js" %}"></script>
<script src="{% static "plugins/parallax-js-master/parallax.min.js" %}"></script>
<script src="{% static "js/custom.js" %}"></script>
<script src="{% static "js/jquery-scrollbar.js" %}"></script>

<script>

var selectedcategory,countries;

$(document).ready(function(){
		$("select.category").change(function(){
				selectedcategory = $(this).children("option:selected").val();
				console.log(selectedcategory)
				//alert("You have selected the category - " + selectedcategory);

				if(selectedcategory =="All")
				{

				 var countries = [{% for obj in objects %} "{{ obj.id_name }}", {% endfor %}];
					 console.log(" Suggestions for ALL")
					 console.log(countries)
					 let unique = [...new Set(countries)]
					 console.log(unique)
					 autocomplete(document.getElementById("query"), unique);


				}

				else if(selectedcategory =="Manufacturing")
				{
					var sel=40;
				 console.log(sel)
				 var countries = [{% for obj in objects2 %} "{{ obj.id_name }}", {% endfor %}];
				 console.log(countries)

				 console.log("Suggestions for Manufacturing")
				 let unique = [...new Set(countries)]
				 console.log(unique)

				 autocomplete(document.getElementById("query"), unique);

				}

				else if(selectedcategory =="IT Companies")
				{
					var sel=40;
				 console.log(sel)
				 var countries = [{% for obj in objects5 %} "{{ obj.id_name }}", {% endfor %}];
				 console.log(countries)
				 console.log("Suggestions for IT Companies")
				 let unique = [...new Set(countries)]
				 console.log(unique)

				 autocomplete(document.getElementById("query"), unique);

				}


				else if(selectedcategory =="Automobiles")
				{
					var sel=50;
				 console.log(sel)
				 var countries = [{% for obj in objects3 %} "{{ obj.id_name }}", {% endfor %}];
				 console.log(countries)
				 console.log("Suggestions for Automobiles")
				 let unique = [...new Set(countries)]
				 console.log(unique)

				 autocomplete(document.getElementById("query"), unique);

				}

			 else if(selectedcategory =="Select")
			 {
					var sel=50;
					 console.log(sel)
				 var countries = [];

				 console.log("No suggestions")
				 autocomplete(document.getElementById("query"), countries);
				 console.log(countries)

				}

			 else if(selectedcategory =="Assembling")
				{
						var sel=50;
						 console.log(sel)
					 var countries = [{% for obj in objects4 %} "{{ obj.id_name }}", {% endfor %}];
					 console.log(countries)
					 console.log("Suggestions for Assembling")
					 let unique = [...new Set(countries)]
					 console.log(unique)

					 autocomplete(document.getElementById("query"), countries);

					}



		});

			$("#progress-bar").onscroll();

});


function autocomplete(inp, arr) {
	/*the autocomplete function takes two arguments,
	the text field element and an array of possible autocompleted values:*/
	var currentFocus;
	/*execute a function when someone writes in the text field:*/
	inp.addEventListener("input", function(e) {
			var a, b, i, val = this.value;
			/*close any already open lists of autocompleted values*/
			closeAllLists();
			if (!val) { return false;}
			currentFocus = -1;
			/*create a DIV element that will contain the items (values):*/
			a = document.createElement("DIV");
			a.setAttribute("id", this.id + "autocomplete-list");
			a.setAttribute("class", "autocomplete-items");
			/*append the DIV element as a child of the autocomplete container:*/
			this.parentNode.appendChild(a);
			/*for each item in the array...*/
			for (i = 0; i < arr.length; i++) {
				/*check if the item starts with the same letters as the text field value:*/
				if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
					/*create a DIV element for each matching element:*/
					b = document.createElement("DIV");
					/*make the matching letters bold:*/
					b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
					b.innerHTML += arr[i].substr(val.length);
					/*insert a input field that will hold the current array item's value:*/
					b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
					/*execute a function when someone clicks on the item value (DIV element):*/
					b.addEventListener("click", function(e) {
							/*insert the value for the autocomplete text field:*/
							inp.value = this.getElementsByTagName("input")[0].value;
							/*close the list of autocompleted values,
							(or any other open lists of autocompleted values:*/
							closeAllLists();
					});
					a.appendChild(b);
				}
			}
	});
	/*execute a function presses a key on the keyboard:*/
	inp.addEventListener("keydown", function(e) {
			var x = document.getElementById(this.id + "autocomplete-list");
			if (x) x = x.getElementsByTagName("div");
			if (e.keyCode == 40) {
				/*If the arrow DOWN key is pressed,
				increase the currentFocus variable:*/
				currentFocus++;
				/*and and make the current item more visible:*/
				addActive(x);
			} else if (e.keyCode == 38) { //up
				/*If the arrow UP key is pressed,
				decrease the currentFocus variable:*/
				currentFocus--;
				/*and and make the current item more visible:*/
				addActive(x);
			} else if (e.keyCode == 13) {
				/*If the ENTER key is pressed, prevent the form from being submitted,*/
				e.preventDefault();
				if (currentFocus > -1) {
					/*and simulate a click on the "active" item:*/
					if (x) x[currentFocus].click();
				}
			}
	});
	function addActive(x) {
		/*a function to classify an item as "active":*/
		if (!x) return false;
		/*start by removing the "active" class on all items:*/
		removeActive(x);
		if (currentFocus >= x.length) currentFocus = 0;
		if (currentFocus < 0) currentFocus = (x.length - 1);
		/*add class "autocomplete-active":*/
		x[currentFocus].classList.add("autocomplete-active");
	}
	function removeActive(x) {
		/*a function to remove the "active" class from all autocomplete items:*/
		for (var i = 0; i < x.length; i++) {
			x[i].classList.remove("autocomplete-active");
		}
	}
	function closeAllLists(elmnt) {
		/*close all autocomplete lists in the document,
		except the one passed as an argument:*/
		var x = document.getElementsByClassName("autocomplete-items");
		for (var i = 0; i < x.length; i++) {
			if (elmnt != x[i] && elmnt != inp) {
				x[i].parentNode.removeChild(x[i]);
			}
		}
	}
	/*execute a function when someone clicks in the document:*/
	document.addEventListener("click", function (e) {
			closeAllLists(e.target);
	});
}

/*An array containing all the category names in the world:*/

window.addEventListener( "pageshow", function ( event ) {
	var historyTraversal = event.persisted ||
												 ( typeof window.performance != "undefined" &&
															window.performance.navigation.type === 2 );
	if ( historyTraversal ) {
		// Handle page restore.
		window.location.reload();
		console.log("Page Reloaded");
	}
});

/*--------------------------Function for submitting after enter key is pressed--------------------------------------------------------------------------------------------------------------------------------------------------------------- */

var input = document.getElementById("query");
input.addEventListener("keyup", function(event) {
		event.preventDefault();
		if (event.keyCode === 13) {
				document.getElementById("myBtn").click();
		}
});

window.onscroll = function() {scrollFunction()};

function scrollFunction() {
    if (document.body.scrollTop > 40 || document.documentElement.scrollTop > 40) {
        document.getElementById("myBtn2").style.display = "block";
    } else {
        document.getElementById("myBtn2").style.display = "none";
    }
}

// When the user clicks on the button, scroll to the top of the document
function topFunction() {
    document.body.scrollTop = 0;
    document.documentElement.scrollTop = 0;
}

</script>


<script type="text/javascript">
	$(window).on('load', function() {
	 setTimeout(function(){
		 $('#subscribeModal').modal('show');
	 }, 10);

	});
	$('#Reloadpage').click(function() {
		location.reload();
	});
</body>
</html>
